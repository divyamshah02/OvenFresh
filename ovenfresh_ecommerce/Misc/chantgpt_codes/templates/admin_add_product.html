<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Add Product - Admin Panel</title>
    <script src="C:\Users\Divyam Shah\OneDrive\Desktop\Dynamic Labz\Clients\Clients\Oven fresh\OvenFresh\ovenfresh_ecommerce\Misc\chantgpt_codes\static/js/api_caller.js"></script> <!-- Your shared callApi file -->
</head>

<body>
    <h2>Add New Product</h2>

    <!-- Product Info -->
    <div>
        <label>Product Title:</label>
        <input type="text" id="productTitle" placeholder="Enter product title">
    </div>
    <div>
        <label>Product Description:</label>
        <textarea id="productDesc" placeholder="Enter description"></textarea>
    </div>
    <div>
        <label>Product Photo URL:</label>
        <input type="text" id="productPhoto" placeholder="Enter photo URL">
    </div>
    <div>
        <label>Category:</label>
        <select id="categorySelect">
            <option disabled selected>-- Select Category --</option>
        </select>
    </div>
    <div>
        <label>Sub-Category:</label>
        <select id="subCategorySelect">
            <option disabled selected>-- Select Sub-Category --</option>
        </select>
    </div>

    <hr>

    <!-- Variation -->
    <h3>Product Variation</h3>
    <div>
        <label>Weight:</label>
        <input type="text" id="weight" placeholder="e.g. 500g">
    </div>
    <div>
        <label>Actual Price:</label>
        <input type="number" id="actualPrice" placeholder="e.g. 1000">
    </div>
    <div>
        <label>Discounted Price:</label>
        <input type="number" id="discountedPrice" placeholder="e.g. 800">
    </div>

    <hr>

    <!-- Pincode Timeslot Availability -->
    <h3>Availability by Pincode & Timeslot</h3>
    <div id="pincodeAvailability">
        <!-- JS will populate pincode and timeslot checkboxes here -->
    </div>

    <hr>

    <button id="submitProductBtn">Create Product</button>

    <script src="C:\Users\Divyam Shah\OneDrive\Desktop\Dynamic Labz\Clients\Clients\Oven fresh\OvenFresh\ovenfresh_ecommerce\Misc\chantgpt_codes\static/js/admin_add_product.js"></script> <!-- Your shared callApi file -->
    <script type="module">
        // import { AdminAddProduct } from "C:\Users\Divyam Shah\OneDrive\Desktop\Dynamic Labz\Clients\Clients\Oven fresh\OvenFresh\ovenfresh_ecommerce\Misc\chantgpt_codes\static/js/admin_add_product.js";

        // const csrfToken = "{{ csrf_token }}";  // If you're rendering with Django
        const csrfToken = getCSRFTokenFromCookie('csrftoken');
        console.log(csrfToken);

        AdminAddProduct(
            csrfToken,
            "http://127.0.0.1:8000/product-api/category/",
            "http://127.0.0.1:8000/product-api/sub-category/",
            "http://127.0.0.1:8000/product-api/pincode-timeslots/",
            "http://127.0.0.1:8000/product-api/product/",
            "http://127.0.0.1:8000/product-api/product-variation/",
            "http://127.0.0.1:8000/product-api/availability-charges/"
        );
    </script>

    <script>
        function getCSRFTokenFromCookie(cookieName) {
            const name = cookieName + "=";
            const decodedCookie = decodeURIComponent(document.cookie);
            const cookieArray = decodedCookie.split(';');
            for (let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i];
                while (cookie.charAt(0) === ' ') {
                    cookie = cookie.substring(1);
                }
                if (cookie.indexOf(name) === 0) {
                    return cookie.substring(name.length, cookie.length);
                }
            }
            return "";
        }

    </script>
</body>

</html>